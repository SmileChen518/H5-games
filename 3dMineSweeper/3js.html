<!DOCTYPE html>
<html>
<head>
    <title></title>
    <style>canvas { width: 100%; height: 100% }</style>
    <script src="../three.js"></script>
    <script src='../stats.js'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/16.3.5/Tween.min.js"></script>
</head>
<body>
	<script>
		var stats, renderer, camera, scene, light, group, geometry, material;
		function initTween(){
			// new TWEEN.Tween( group.position)
   //          .to( { x: -400 }, 3000 ).repeat( Infinity ).start();
		}
		function initStat() {
        	stats = new Stats();
			stats.setMode(0); // 0: fps, 1: ms
			stats.domElement.style.position = 'absolute';
			stats.domElement.style.left = '0px';
			stats.domElement.style.top = '0px';
			document.body.appendChild( stats.domElement );
        }
		function initRederer(){
			renderer = new THREE.WebGLRenderer( { antialias: true } );
			renderer.setPixelRatio( window.devicePixelRatio );
			renderer.setSize( window.innerWidth, window.innerHeight );
			document.body.appendChild( renderer.domElement );
		}
		function initCamera(){
			camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
			// camera = new THREE.OrthographicCamera( window.innerWidth / - 2, window.innerWidth / 2, window.innerHeight / 2, window.innerHeight / - 2, 10, 1000 );
			camera.position.set( 0, 0, 200 );
		}
		function initScene(){
			scene = new THREE.Scene();
		}
        function initLight() {
        	// light = new THREE.AmbientLight(0x00FF00);
        	// scene.add(light);
            light = new THREE.DirectionalLight(0xFFFFFF, 1, 0);
            light.position.set(0, 1, 1);
            // scene.add(light);
            // light = new THREE.PointLight(0x0000FF);
            // light.position.set(0, 0, 100);
            scene.add(light);
        }
        // 扫雷格子
		function initGroup(){
			group = new THREE.Group();
			var LENGTH = 10, COUNT = 7, INTER = 0, OFFSET = (LENGTH+INTER)*(COUNT-1)/2; 
			geometry = new THREE.BoxBufferGeometry( LENGTH, LENGTH, LENGTH );
			//纹理		
			var btn = new THREE.TextureLoader().load( 'textures/btnGrid.png' );
			var mine = new THREE.TextureLoader().load( 'textures/mine.png' );
			// 绿色
			material = new THREE.MeshBasicMaterial( { map: btn } );
			// material = new THREE.MeshLambertMaterial( { color:0xFFFFFF} );
			mesh = new THREE.Mesh( geometry, material );
			// scene.add(mesh);
			mesh.position.set(-OFFSET, OFFSET, 0);
			group.add(mesh);
			for (var i = 0; i < COUNT; i++) for (var j = 0; j < COUNT; j++) for (var z = 0; z < COUNT; z++){
				if (i == 0 && j == 0 && z == 0) continue;
				var temp = mesh.clone();
				temp.position.set((LENGTH+INTER)*j-OFFSET, -(LENGTH+INTER)*i+OFFSET, (LENGTH+INTER)*z);
				group.add(temp);
			}

			scene.add( group );
			window.addEventListener( 'resize', onWindowResize, false );
		}
		function onWindowResize() {

			camera.aspect = window.innerWidth / window.innerHeight;
			camera.updateProjectionMatrix();

			renderer.setSize( window.innerWidth, window.innerHeight );

		}
		// 网格
		function initGrids(){
			// group = new THREE.Group();
			// geometry = new THREE.Geometry();
   //          material = new THREE.LineBasicMaterial({color: 0x777777});

   //          var size = 20, inter = 10, len = 200;
   //          geometry.vertices.push( new THREE.Vector3( -len/2, 0, 0 ) );
   //          geometry.vertices.push( new THREE.Vector3( len/2, 0, 0 ) );
   //          for ( var i = 0; i <= size; i ++ ) {
   //              var item_row = new THREE.Line( geometry, material );
   //              item_row.position.y = (i * inter) - len/2;
   //              group.add( item_row );

   //              var item_col = new THREE.Line( geometry, material );
   //              item_col.rotation.z = Math.PI/2;
   //              item_col.position.x = (i * inter) - len/2;
   //              group.add( item_col );
   //          }
            
   //          scene.add(group);
		}
		function animate() {
			group.rotation.x += 0.005;
			group.rotation.y += 0.01;
			renderer.render( scene, camera );
			requestAnimationFrame( animate );
			// group.rotation.x += 0.01;
			// stats.update();
			// TWEEN.update();
		}
		function init(){
			// initStat();
			initRederer();
			initCamera();
			initScene();
			// initLight();
			initGroup();
			// initGrids();
			// initTween();
			animate();
		}
		function initMines(){
			// var tNum = [];
	  //       var tMineNum = [];
	  //       _tNum = [];
	  //       _tFlag = [];
	  //       _tBtns = [];
	  //       _tMine = [];
	  //       for (var i = 0; i < _iTotal; i++) {
	  //           tNum.push(i);
	  //           tMineNum[i] = 0;
	  //           _tNum[i] = 0;
	  //           _tFlag[i] = 0;
	  //           _tBtns[i] = 1;
	  //           // this._tBtns[i] = 0;
	  //       };
   //          for (var i = 0; i < _iMineCount; i++) {
   //              var iRandom = Math.floor(Math.random() * (tNum.length - 1));
   //              var iNum = tNum.splice(iRandom, 1);
   //              tMineNum[iNum] = 1;
   //          };
	  //       // this._tileMap.showMines(tMineNum);
	  //       for (var i = 0; i < _iTotal; i++) {
	  //           if (tMineNum [i] == 1) {
	  //               _tMine.push(i);
	  //               _tNum[i] = -1;
	  //           }
	  //       };
		}
		function initLabs(){

		}
		function showGrids(idxNum){
	 //        var _iRow = this._iRow;
	 //        var iLabNum = this._tNum [idxNum];
	 //        if (iLabNum >= 0) {
	 //            this._tBtns[idxNum] = 0;
	 //            if (iLabNum == 0) {
	 //                var iMine = parseInt(idxNum);
	 //                var iCurLine = Math.floor (iMine / _iRow);
	 //                var iCurRow = iMine % _iRow;
	 //                for (var iLine = 0; iLine < 3; iLine++) {
	 //                    for (var iRow = 0; iRow < 3; iRow++) {
	 //                        var iRowTemp = iCurRow - 1 + iRow;
	 //                        var iLineTemp = iCurLine - 1 + iLine;
	 //                        if (iRowTemp > -1 && iRowTemp < _iRow && iLineTemp > -1 && iLineTemp < this._iLine) {
	 //                            var idx = iMine + (iRow - 1) + (iLine * _iRow - _iRow);
	 //                            if (this._tFlag[idx] == 0 && this._tBtns[idx] == 1 && this._tSearch.indexOf(idx) == -1) {
	 //                                this._tSearch.push(idx);
	 //                                this.showGrids (idx);
	 //                            }
	 //                        }
	 //                    }
	 //                }
	 //            }
	 //        }
	    }
	    function onClickNum(idxNum){
	    //     var _iRow = this._iRow;
	    //     var iMine = parseInt(idxNum);
	    //     var iCurLine = Math.floor (iMine / _iRow);
	    //     var iCurRow = iMine % _iRow;
	    //     //统计标记的地雷数量，标错return;
	    //     var iShowNum = 0;
	    //     for (var iLine = 0; iLine < 3; iLine++) {
	    //         for (var iRow = 0; iRow < 3; iRow++) {
	    //             var iRowTemp = iCurRow - 1 + iRow;
	    //             var iLineTemp = iCurLine - 1 + iLine;
	    //             if (iRowTemp > -1 && iRowTemp < _iRow && iLineTemp > -1 && iLineTemp < this._iLine) {
	    //                 var idx = iMine + (iRow - 1) + (iLine * _iRow - _iRow);
	    //                 if (this._tFlag[idx] == 1) {
	    //                     iShowNum++;
	    //                 }
	    //             }
	    //         }
	    //     }
	    //     //判断地雷是否均被标记
	    //     if (this._tNum[idxNum] != iShowNum)
	    //         return;
	    //     this.playSound("check");
	    //     this.setTSearch();
	    //     //展开地图
	    //     for (var iLine = 0; iLine < 3; iLine++) {
	    //         for (var iRow = 0; iRow < 3; iRow++) {
	    //             var iRowTemp = iCurRow - 1 + iRow;
	    //             var iLineTemp = iCurLine - 1 + iLine;
	    //             if (iRowTemp > -1 && iRowTemp < _iRow && iLineTemp > -1 && iLineTemp < this._iLine) {
	    //                 var idx = iMine + (iRow - 1) + (iLine * _iRow - _iRow);
	    //                 if (this._tFlag[idx] == 0){
	    //                     if (this._tNum[idx] == -1){
	    //                         this._tBtns[idx] = 0;
	    //                         this.playSound("bomb");
	    //                         this._tileMap.showRedMine(idx);
	    //                         this.onEnd();
	    //                         this._tileMap.strBack = "bomb";
	    //                         break;
	    //                     }
	    //                     if (this._tBtns[idx] == 1){
	    //                         if (this._tSearch.indexOf(idx) == -1) {
	    //                             this._tSearch.push(idx);
	    //                             this.showGrids (idx);
	    //                         }
	    //                     }
	    //                 }
	    //             }
	    //         }
	    //     };
	    //     this._tileMap.showBtns(this._tBtns);
	    //     this.showWin();
	    }
		init();
    </script>
   <!--  <div>
	    Fov:<input type="text" value="45" id="txtFov"/>
	</div> -->
</body>
</html>
